---
layout: post
author: vf
---

## 需求背景
本人近期有变更工种的想法(前端->后端)，由于缺乏后端**线上**项目的开发经验，所以除了学习后端相关的开发知识外，还需要有一个项目来填补开发经验的空白。

这就产生了一个问题，我需要一个什么样的项目？如果只是应付面试的话，其实github上已经有很多，如果可以看会并吃透的话，其实也可以说是自己的。但我并不想这么做，我总觉得纸上得来终觉浅，如果不能够自己从0开始设计系统、搭建环境、开发软件的话，很难称得上是真正的掌握。

既然要从0开始搭建一套系统的话，选择就比较多了，我现在供职于百度网盘，对于网盘这套系统的后端实现有一些简单的了解，我想我可以借此找到一些灵感。最终结合起来得到的结论就是：**支持文件传输与云端存储的个人网盘系统**。

系统命名为 **飞鸽(pigeon)** ，随便想的一个名字，可能因为我本人经常放别人/被放鸽子吧

## 面向对象分析
### 用例分析
系统应该至少具备如下功能模块:
1. (用户模块)注册新用户、登录、注销账号、切换账号
2. (文件模块)查看当前文件列表
3. (传输模块)上传本地文件、下载云端文件到本地，支持分片上传、断点续传

可以绘制出用例图如下:
![](/assets/PigeonUseCaseDiagram.png)

### 流程分析
通过用例图可以看到，目前系统的功能还是相对比较简单，可以分析出下面三个主流程：登录、上传、下载
其中登录流程是十分常见的，这里不做详细分析，主要看上传流程和下载流程

1.上传流程，绘制活动图如下
![](/assets/PigeonUploadActivityDiagram.png)

*部分指这里需要计算3种 MD5:
- 全文MD5: 用来验证是否命中秒传
- 前128字节MD5: 配合验证秒传，避免MD5碰撞
- 分片MD5: 用来上传分片6 

2.下载流程


通过这些分析，我们就可以着手开始启动相关模块的开发了

